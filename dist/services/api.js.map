{"version":3,"sources":["services/api.ts"],"names":[],"mappings":"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","file":"api.js","sourcesContent":["import * as angular from 'angular';\nimport * as jQuery from 'jquery';\nimport * as _ from 'lodash';\n\ninterface RequestDetails {\n    path: string;\n    params: Object;\n}\n\nconst api = angular.module('pathwayvis.services.api', []);\n\n// API url\nexport const API_ROOT_URL = 'http://api.dd-decaf.eu/';\n\nexport class APIService {\n    private _http: angular.IHttpService;\n\n    constructor($http: angular.IHttpService) {\n        this._http = $http;\n    }\n\n    private _request(method: string, path: string, data: Object, params: Object): angular.IHttpPromise<any> {\n\n        const reqDetails = this._handleParams(path, params);\n\n        return this._http({\n            method: method,\n            data: data,\n            url: API_ROOT_URL + reqDetails.path,\n            params: reqDetails.params\n        });\n    }\n\n    private _parseUrlParams(path: string): string[] {\n        return _.compact(_.map(path.split(/\\W/), (param) => {\n            if (!(new RegExp('^\\\\d+$').test(param)) && param && (new RegExp('(^|[^\\\\\\\\]):' + param + '(\\\\W|$)').test(path))) {\n                return param;\n            }\n        }));\n    }\n\n    private _handleParams(path: string, params: Object): RequestDetails {\n        const urlParamKeys = _.intersection(_.keys(params), this._parseUrlParams(path));\n\n        _.each(urlParamKeys, (key) => {\n            path = path.replace(':' + key, params[key]);\n            delete params[key];\n        });\n\n        return {\n            'path': path,\n            'params': params\n        }\n    }\n\n    public get(path: string, parameters: Object = {}): angular.IPromise<Object> {\n        return this._request('GET', path, undefined, parameters);\n    }\n\n    public post(path: string, data: Object, parameters: Object = {}): angular.IPromise<Object> {\n        return this._request('POST', path, data, parameters);\n    }\n\n    public put(path: string, data: Object, parameters: Object = {}): angular.IPromise<Object> {\n        return this._request('PUT', path, data, parameters);\n    }\n\n    public patch(path: string, data: Object, parameters: Object = {}): angular.IPromise<Object> {\n        return this._request('PATCH', path, data, parameters);\n    }\n\n    public delete(path: string, data: Object, parameters: Object = {}): angular.IPromise<Object> {\n        return this._request('DELETE', path, data, parameters);\n    }\n}\n\napi.service('api', APIService);\nexport default api;\n"]}